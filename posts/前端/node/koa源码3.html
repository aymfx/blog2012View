<!DOCTYPE html>
<html lang="zn-ch" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>koa源码 - request 对象 | 爱编程</title>
    <meta name="description" content="koa源码">
    <link rel="preload stylesheet" href="/assets/style.80d04cdc.css" as="style">
    <script type="module" src="/assets/app.7eb8e67d.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
  <link rel="modulepreload" href="/assets/chunks/framework.1f285265.js">
  <link rel="modulepreload" href="/assets/chunks/theme.5521cbf6.js">
  <link rel="modulepreload" href="/assets/posts_前端_node_koa源码3.md.05cda1e5.lean.js">
  <link rel="icon" type="image/svg" href="/logo.svg">
  <script href="https://hm.baidu.com/hm.js?77d54f48fdfccb9ea2c5c77ba4bf9c6c"></script>
  <meta name="author" content="aymfx">
  <meta property="og:title" content="Home">
  <meta property="og:description" content="我的博客">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-bffce215><!--[--><!--]--><!--[--><span tabindex="-1" data-v-73e3a132></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-73e3a132> Skip to content </a><!--]--><!----><header class="VPNav" data-v-bffce215 data-v-5bdc5df3><div class="VPNavBar" data-v-5bdc5df3 data-v-d747baf3><div class="container" data-v-d747baf3><div class="title" data-v-d747baf3><div class="VPNavBarTitle" data-v-d747baf3 data-v-1ab7b21f><a class="title" href="/" data-v-1ab7b21f><!--[--><!--]--><!--[--><img class="VPImage logo" src="/cat.svg" alt data-v-dc109a54><!--]--><!--[-->爱编程<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-d747baf3><div class="curtain" data-v-d747baf3></div><div class="content-body" data-v-d747baf3><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-d747baf3 data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-f732b5d0 data-v-b7aed9c7 data-v-f3ed0000><!--[-->🏡首页<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/tags.html" tabindex="0" data-v-f732b5d0 data-v-b7aed9c7 data-v-f3ed0000><!--[-->🔖标签<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/archives.html" tabindex="0" data-v-f732b5d0 data-v-b7aed9c7 data-v-f3ed0000><!--[-->📃归档<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about.html" tabindex="0" data-v-f732b5d0 data-v-b7aed9c7 data-v-f3ed0000><!--[-->🤩关于<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-d747baf3 data-v-5e9f0637><label title="toggle dark mode" data-v-5e9f0637 data-v-67878c63><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-67878c63 data-v-92d8f6fb><span class="check" data-v-92d8f6fb><span class="icon" data-v-92d8f6fb><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-67878c63><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-67878c63><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-d747baf3 data-v-ef6192dc data-v-b8f6762d><!--[--><a class="VPSocialLink" href="https://github.com/aymfx" aria-label="github" target="_blank" rel="noopener" data-v-b8f6762d data-v-dbecf575><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="mailto:aymfx520@gmail.com" aria-label target="_blank" rel="noopener" data-v-b8f6762d data-v-dbecf575><svg role="img" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20">
            <path d="M874.666667 375.189333V746.666667a64 64 0 0 1-64 64H213.333333a64 64 0 0 1-64-64V375.189333l266.090667 225.6a149.333333 149.333333 0 0 0 193.152 0L874.666667 375.189333zM810.666667 213.333333a64.789333 64.789333 0 0 1 22.826666 4.181334 63.616 63.616 0 0 1 26.794667 19.413333 64.32 64.32 0 0 1 9.344 15.466667c2.773333 6.570667 4.48 13.696 4.906667 21.184L874.666667 277.333333v21.333334L553.536 572.586667a64 64 0 0 1-79.893333 2.538666l-3.178667-2.56L149.333333 298.666667v-21.333334a63.786667 63.786667 0 0 1 35.136-57.130666A63.872 63.872 0 0 1 213.333333 213.333333h597.333334z" ></path>
            </svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-d747baf3 data-v-c8c2ae4b data-v-6afe904b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6afe904b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6afe904b><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6afe904b><div class="VPMenu" data-v-6afe904b data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-c8c2ae4b><div class="item appearance" data-v-c8c2ae4b><p class="label" data-v-c8c2ae4b>Appearance</p><div class="appearance-action" data-v-c8c2ae4b><label title="toggle dark mode" data-v-c8c2ae4b data-v-67878c63><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-checked="false" data-v-67878c63 data-v-92d8f6fb><span class="check" data-v-92d8f6fb><span class="icon" data-v-92d8f6fb><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-67878c63><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-67878c63><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></label></div></div></div><div class="group" data-v-c8c2ae4b><div class="item social-links" data-v-c8c2ae4b><div class="VPSocialLinks social-links-list" data-v-c8c2ae4b data-v-b8f6762d><!--[--><a class="VPSocialLink" href="https://github.com/aymfx" aria-label="github" target="_blank" rel="noopener" data-v-b8f6762d data-v-dbecf575><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="mailto:aymfx520@gmail.com" aria-label target="_blank" rel="noopener" data-v-b8f6762d data-v-dbecf575><svg role="img" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="20">
            <path d="M874.666667 375.189333V746.666667a64 64 0 0 1-64 64H213.333333a64 64 0 0 1-64-64V375.189333l266.090667 225.6a149.333333 149.333333 0 0 0 193.152 0L874.666667 375.189333zM810.666667 213.333333a64.789333 64.789333 0 0 1 22.826666 4.181334 63.616 63.616 0 0 1 26.794667 19.413333 64.32 64.32 0 0 1 9.344 15.466667c2.773333 6.570667 4.48 13.696 4.906667 21.184L874.666667 277.333333v21.333334L553.536 572.586667a64 64 0 0 1-79.893333 2.538666l-3.178667-2.56L149.333333 298.666667v-21.333334a63.786667 63.786667 0 0 1 35.136-57.130666A63.872 63.872 0 0 1 213.333333 213.333333h597.333334z" ></path>
            </svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-d747baf3 data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><!----></header><!----><!----><div class="VPContent" id="VPContent" data-v-bffce215 data-v-91952ce3><div class="VPDoc has-aside" data-v-91952ce3 data-v-c11df1f0><!--[--><!--]--><div class="container" data-v-c11df1f0><div class="aside" data-v-c11df1f0><div class="aside-curtain" data-v-c11df1f0></div><div class="aside-container" data-v-c11df1f0><div class="aside-content" data-v-c11df1f0><div class="VPDocAside" data-v-c11df1f0 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-cb998dce data-v-c834746b><div class="content" data-v-c834746b><div class="outline-marker" data-v-c834746b></div><div class="outline-title" data-v-c834746b>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-c834746b><span class="visually-hidden" id="doc-outline-aria-label" data-v-c834746b> Table of Contents for current page </span><ul class="root" data-v-c834746b data-v-e3c7877a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-c11df1f0><div class="content-container" data-v-c11df1f0><!--[--><!--[--><!--[--><div data-v-a6824fd8><h1 class="title" data-v-a6824fd8>koa源码 - request 对象</h1><div class="date" data-v-a6824fd8>🕒 发布时间: 3 years ago</div></div><!--]--><!--]--><!--]--><!----><main class="main" data-v-c11df1f0><div style="position:relative;" class="vp-doc _posts_%E5%89%8D%E7%AB%AF_node_koa%E6%BA%90%E7%A0%813" data-v-c11df1f0><div><h2 id="request-对象-分析" tabindex="-1">request 对象 分析 <a class="header-anchor" href="#request-对象-分析" aria-label="Permalink to &quot;request 对象 分析&quot;">​</a></h2><h2 id="引用的包" tabindex="-1">引用的包 <a class="header-anchor" href="#引用的包" aria-label="Permalink to &quot;引用的包&quot;">​</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Module dependencies.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> URL </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">url</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">URL</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> net </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">net</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> accepts </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">accepts</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 允许接受的类型</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> contentType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">content-type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Create and parse HTTP Content-Type header according to RFC 7231</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> stringify </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">url</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">format</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> parse </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">parseurl</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> qs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">querystring</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 解析body数据</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> typeis </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">type-is</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fresh </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">fresh</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 刷新机制 不懂  英文太难了</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> only </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">only</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> util </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">util</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> IP </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">context#ip</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>对象方法</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return request header.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 设置请求标头对象</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set request header.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 设置请求标头对象。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return request header, alias as request.header</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set request header, alias as request.header</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get request URL.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 获取请求 URL.</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set request URL.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 设置请求 URL, 对 url 重写有用。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get origin of URL.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">origin</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 获取URL的来源，包括 protocol 和 host。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`${</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">protocol</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">://</span><span style="color:#89DDFF;">${</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get full request URL.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">href</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 获取完整的请求URL，包括 protocol，host 和 url。</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// support: `GET http://example.com/foo`</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;font-style:italic;">^</span><span style="color:#C3E88D;">https</span><span style="color:#89DDFF;">?</span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;">\/\/</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">i</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">test</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">originalUrl</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">originalUrl</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">origin</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">originalUrl</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get request method.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">method</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 请求方法。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set request method.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">val</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">method</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 设置请求方法，对于实现诸如 methodOverride() 的中间件是有用的。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get request pathname.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 获取请求路径名。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set pathname, retaining the query-string when present.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">path</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">path</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 设置请求路径名，并在存在时保留查询字符串。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">pathname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">path</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get parsed query-string.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 获取解析的查询字符串, 当没有查询字符串时，返回一个空对象。请注意，此 getter _不_ 支持嵌套解析。</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">query</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">querystring</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_querycache</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_querycache</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">qs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">str</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set query-string as an object.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">obj</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">query</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">obj</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 将查询字符串设置为给定对象。 请注意，此 setter _不_ 支持嵌套对象</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">querystring</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">qs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">obj</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get query string.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">querystring</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// color=blue&amp;size=small  根据 ? 获取原始查询字符串.</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">query</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set querystring.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">str</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">querystring</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">str</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 设置原始查询字符串。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">search</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">?</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">}`</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">search</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">path</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get the search string. Same as the querystring</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * except it includes the leading ?.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">search</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 设置原始查询字符串。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">querystring</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">?</span><span style="color:#89DDFF;">${</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">querystring</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set the search string. Same as</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * request.querystring= but included for ubiquity.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">str</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">search</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">str</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">querystring</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">str</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Parse the &quot;Host&quot; header field host</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * and support X-Forwarded-Host when a</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * proxy is enabled.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> hostname:port</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">host</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proxy</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">proxy</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 当 app.proxy 是 true 时支持 X-Forwarded-Host，否则使用 Host。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proxy</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">X-Forwarded-Host</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// 反向代理（负载均衡器，CDN）的主机名称和端口可能与处理请求的源服务器不同，在这种情况下，X-Forwarded-Host头部可用于确定最初使用哪个主机。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">httpVersionMajor</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">) </span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">:authority</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;">) </span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Host</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">\s</span><span style="color:#89DDFF;">*</span><span style="color:#C3E88D;">,\s</span><span style="color:#89DDFF;">*/</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Parse the &quot;Host&quot; header field hostname</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * and support X-Forwarded-Host when a</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * proxy is enabled.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> hostname</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 存在时获取主机名。当 app.proxy 是 true 时支持 X-Forwarded-Host，否则使用 Host。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">URL</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">hostname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// IPv6</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get WHATWG parsed URL.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Lazily memoized.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">URL|Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">URL</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 获取 WHATWG 解析的 URL 对象。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#676E95;font-style:italic;">/* istanbul ignore else */</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">memoizedURL</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">protocol</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">protocol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">originalUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">originalUrl</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// avoid undefined in template string</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">memoizedURL</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">URL</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">`${</span><span style="color:#A6ACCD;">protocol</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">://</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">}${</span><span style="color:#A6ACCD;">originalUrl</span><span style="color:#89DDFF;">}`</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">err</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">memoizedURL</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">memoizedURL</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Check if the request is fresh, aka</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Last-Modified and/or the ETag</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * still match.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Boolean</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">fresh</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 检查请求缓存是否“新鲜”，也就是内容没有改变。此方法用于 If-None-Match / ETag, 和 If-Modified-Since 和 Last-Modified 之间的缓存协商。 在设置一个或多个这些响应头后应该引用它</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// GET or HEAD for weak freshness validation only</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">HEAD</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 2xx or 304 as per rfc2616 14.26</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> ((</span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">200</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">300</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">304</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">fresh</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">header</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">header</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Check if the request is stale, aka</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * &quot;Last-Modified&quot; and / or the &quot;ETag&quot; for the</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * resource has changed.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Boolean</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">stale</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 相反与 request.fresh.</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">fresh</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Check if the request is idempotent.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Boolean</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">idempotent</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 检查请求是否是幂等的。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">HEAD</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PUT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DELETE</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">OPTIONS</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TRACE</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!!~</span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">indexOf</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return the request socket.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Connection</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">socket</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 返回请求套接字。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">socket</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get the charset when present or undefined.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">charset</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 在存在时获取请求字符集，或者 undefined：</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">parameters</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">contentType</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">parameters</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">charset</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">e</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return parsed Content-Length when present.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Number</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">length</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 返回以数字返回请求的 Content-Length，或 undefined。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">len</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Content-Length</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">len</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">~~</span><span style="color:#A6ACCD;">len</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return the protocol string &quot;http&quot; or &quot;https&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * when requested with TLS. When the proxy setting</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * is enabled the &quot;X-Forwarded-Proto&quot; header</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * field will be trusted. If you&#39;re running behind</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * a reverse proxy that supplies https for you this</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * may be enabled.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">protocol</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 返回请求协议，“https” 或 “http”。当 app.proxy 是 true 时支持 X-Forwarded-Proto。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">socket</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">encrypted</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">proxy</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proto</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">X-Forwarded-Proto</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proto</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proto</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">\s</span><span style="color:#89DDFF;">*</span><span style="color:#C3E88D;">,\s</span><span style="color:#89DDFF;">*/</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Short-hand for:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *    this.protocol == &#39;https&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Boolean</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">secure</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 安全性 通过 ctx.protocol == &quot;https&quot; 来检查请求是否通过 TLS 发出。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">protocol</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * When `app.proxy` is `true`, parse</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * the &quot;X-Forwarded-For&quot; ip address list.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * For example if the value were &quot;client, proxy1, proxy2&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * you would receive the array `[&quot;client&quot;, &quot;proxy1&quot;, &quot;proxy2&quot;]`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * where &quot;proxy2&quot; is the furthest down-stream.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Array</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">ips</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 当 X-Forwarded-For 存在并且 app.proxy 被启用时，这些 ips 的数组被返回，从上游 - &gt;下游排序。 禁用时返回一个空数组。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proxy</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">proxy</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">X-Forwarded-For</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proxy</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">?</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">\s</span><span style="color:#89DDFF;">*</span><span style="color:#C3E88D;">,\s</span><span style="color:#89DDFF;">*/</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return request&#39;s remote address</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * When `app.proxy` is `true`, parse</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * the &quot;X-Forwarded-For&quot; ip address list and return the first one</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">ip</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 请求远程地址。 当 app.proxy 是 true 时支持 X-Forwarded-Proto。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">IP</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">IP</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">ips</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">socket</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">remoteAddress</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">IP</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">ip</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">_ip</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">IP</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_ip</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return subdomains as an array.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Subdomains are the dot-separated parts of the host before the main domain</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * of the app. By default, the domain of the app is assumed to be the last two</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * parts of the host. This can be changed by setting `app.subdomainOffset`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * For example, if the domain is &quot;tobi.ferrets.example.com&quot;:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * If `app.subdomainOffset` is not set, this.subdomains is</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * `[&quot;ferrets&quot;, &quot;tobi&quot;]`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * If `app.subdomainOffset` is 3, this.subdomains is `[&quot;tobi&quot;]`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Array</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">subdomains</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 子域是应用程序主域之前主机的点分隔部分。默认情况下，应用程序的域名假定为主机的最后两个部分。这可以通过设置 app.subdomainOffset 来更改。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">offset</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">subdomainOffset</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hostname</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">hostname</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">net</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isIP</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">hostname</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hostname</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">reverse</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">slice</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">offset</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Get accept object.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Lazily memoized.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">private</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">accept</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_accept</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_accept</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">accepts</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Set accept object.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">private</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">accept</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">obj</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_accept</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Check if the given `type(s)` is acceptable, returning</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * the best match when true, otherwise `false`, in which</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * case you should respond with 406 &quot;Not Acceptable&quot;.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * The `type` value may be a single mime type string</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * such as &quot;application/json&quot;, the extension name</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * such as &quot;json&quot; or an array `[&quot;json&quot;, &quot;html&quot;, &quot;text/plain&quot;]`. When a list</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * or array is given the _best_ match, if any is returned.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Examples:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // Accept: text/html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;html&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;html&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // Accept: text/*, application/json</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;html&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;html&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;text/html&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;text/html&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;json&#39;, &#39;text&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;json&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;application/json&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;application/json&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // Accept: text/*, application/json</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;image/png&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;png&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; false</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // Accept: text/*;q=.5, application/json</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts([&#39;html&#39;, &#39;json&#39;]);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.accepts(&#39;html&#39;, &#39;json&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;json&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">type</span><span style="color:#676E95;font-style:italic;">(s)...</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array|false</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">accepts</span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 检查给定的 type(s) 是否可以接受，如果 true，返回最佳匹配，否则为 false。 type 值可能是一个或多个 mime 类型的字符串，如 application/json，扩展名称如 json，或数组 [&quot;json&quot;, &quot;html&quot;, &quot;text/plain&quot;]。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">accept</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">types</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return accepted encodings or best fit based on `encodings`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Given `Accept-Encoding: gzip, deflate`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * an array sorted by quality is returned:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     [&#39;gzip&#39;, &#39;deflate&#39;]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">encoding</span><span style="color:#676E95;font-style:italic;">(s)...</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">acceptsEncodings</span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 检查 encodings 是否可以接受，返回最佳匹配为 true，否则为 false。 请注意，您应该将identity 作为编码之一！</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">accept</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">encodings</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return accepted charsets or best fit based on `charsets`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Given `Accept-Charset: utf-8, iso-8859-1;q=0.2, utf-7;q=0.5`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * an array sorted by quality is returned:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     [&#39;utf-8&#39;, &#39;utf-7&#39;, &#39;iso-8859-1&#39;]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">charset</span><span style="color:#676E95;font-style:italic;">(s)...</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">acceptsCharsets</span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 检查 charsets 是否可以接受，在 true 时返回最佳匹配，否则为 false。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">accept</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">charsets</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return accepted languages or best fit based on `langs`.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Given `Accept-Language: en;q=0.8, es, pt`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * an array sorted by quality is returned:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     [&#39;es&#39;, &#39;pt&#39;, &#39;en&#39;]</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">lang</span><span style="color:#676E95;font-style:italic;">(s)...</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Array|String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">acceptsLanguages</span><span style="color:#89DDFF;">(...</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 检查 langs 是否可以接受，如果为 true，返回最佳匹配，否则为 false。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">accept</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">languages</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">args</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Check if the incoming request contains the &quot;Content-Type&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * header field, and it contains any of the give mime `type`s.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * If there is no request body, `null` is returned.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * If there is no content type, `false` is returned.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Otherwise, it returns the first `type` that matches.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Examples:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // With Content-Type: text/html; charset=utf-8</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.is(&#39;html&#39;); // =&gt; &#39;html&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.is(&#39;text/html&#39;); // =&gt; &#39;text/html&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.is(&#39;text/*&#39;, &#39;application/json&#39;); // =&gt; &#39;text/html&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // When Content-Type is application/json</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.is(&#39;json&#39;, &#39;urlencoded&#39;); // =&gt; &#39;json&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.is(&#39;application/json&#39;); // =&gt; &#39;application/json&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.is(&#39;html&#39;, &#39;application/*&#39;); // =&gt; &#39;application/json&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.is(&#39;html&#39;); // =&gt; false</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|Array</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">types...</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String|false|null</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">is</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">types</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 检查传入请求是否包含 Content-Type 头字段， 并且包含任意的 mime type。 如果没有请求主体，返回 null。 如果没有内容类型，或者匹配失败，则返回 false。 反之则返回匹配的 content-type。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">types</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">typeis</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">types</span><span style="color:#F07178;">)) </span><span style="color:#A6ACCD;">types</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">slice</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">arguments</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">typeis</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">types</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return the request mime type void of</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * parameters such as &quot;charset&quot;.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 获取请求 Content-Type 不含参数 &quot;charset&quot;。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">type</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return request header.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * The `Referrer` header field is special-cased,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * both `Referrer` and `Referer` are interchangeable.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Examples:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.get(&#39;Content-Type&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;text/plain&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.get(&#39;content-type&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &quot;text/plain&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     this.get(&#39;Something&#39;);</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *     // =&gt; &#39;&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">field</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">String</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">field</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 返回请求标头。</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">switch</span><span style="color:#F07178;"> ((</span><span style="color:#A6ACCD;">field</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">field</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toLowerCase</span><span style="color:#F07178;">())) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">referer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">referrer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">referrer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">referer</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">headers</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">field</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Inspect implementation.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">inspect</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 白名单</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">req</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">toJSON</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * Return JSON representation.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">   */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">toJSON</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">only</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">method</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">url</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">header</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span></code></pre></div><blockquote><p>白名单</p></blockquote><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * Custom inspection implementation for newer Node.js versions.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> *</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">return</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">{</span><span style="color:#FFCB6B;font-style:italic;">Object</span><span style="color:#89DDFF;font-style:italic;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">api</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#89DDFF;font-style:italic;">public</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/* istanbul ignore else */</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (util</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inspect</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">custom) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 老操作</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">module.exports</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">util</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inspect</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">custom</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">module.exports.</span><span style="color:#A6ACCD;">inspect</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-c11df1f0 data-v-fc0d1b73><!--[--><!--]--><!----><!----></footer><!--[--><!--[--><!--[--><div id="gitalk-container"></div><!--]--><!--]--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><footer data-v-0334b95a> 欢迎我的博客网站 | Copyright © 2015-2023 AYMFX | <a href="https://beian.miit.gov.cn/" target="_blank" title="工信部" data-v-0334b95a>赣ICP备16012127号-1</a></footer><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about.md\":\"3b6d85a3\",\"archives.md\":\"db6dbbd6\",\"posts_前端_node_fs模块.md\":\"2090ac32\",\"posts_前端_2023_vite页面改造成ssr渲染.md\":\"948e0999\",\"posts_前端_2023_服务端预渲染数据.md\":\"bc101524\",\"posts_前端_以前_node-常用的包.md\":\"a65a3219\",\"posts_前端_以前_node技术分享.md\":\"6a8d9518\",\"posts_前端_以前_promise的用法深入1.md\":\"3a2f823d\",\"posts_前端_以前_promise的用法深入2.md\":\"73f6fc36\",\"posts_前端_以前_promise的用法深入3.md\":\"0dcc2192\",\"posts_前端_以前_pubsub-js的简单使用.md\":\"8a0a1b53\",\"posts_前端_以前_python基础.md\":\"36444c9d\",\"posts_前端_以前_python基础1.md\":\"57bf974e\",\"posts_前端_以前_typescript-类型推断.md\":\"897f29a8\",\"posts_前端_以前_python基础2.md\":\"5dee7e79\",\"posts_前端_以前_python基础3.md\":\"3c66a95b\",\"posts_前端_以前_python基础5.md\":\"e6839757\",\"posts_前端_以前_react-composition-vs-inheritance.md\":\"194759cf\",\"posts_前端_以前_react-handling-events.md\":\"6f7a29dd\",\"posts_前端_以前_react-lifting-state-up.md\":\"7b523b34\",\"posts_前端_以前_react-lists-and-keys.md\":\"987dd87d\",\"posts_前端_以前_react-optimizing-performance.md\":\"fa64bb7b\",\"posts_前端_以前_react-refs-and-the-dom.md\":\"0ed1f740\",\"posts_前端_以前_react-state-and-lifecycle.md\":\"1a2f7452\",\"posts_前端_以前_react-uncontrolled-components.md\":\"aa9c191e\",\"posts_前端_以前_react-es5vses6.md\":\"ef56e01d\",\"posts_前端_以前_react-react-conditional-rendering.md\":\"f52daefb\",\"posts_前端_以前_react-生命周期.md\":\"1712fe3f\",\"posts_前端_以前_typescript-function.md\":\"513a93bb\",\"posts_前端_以前_typescript-模块.md\":\"484e5cfd\",\"posts_前端_以前_typescript-泛型.md\":\"e3a1c021\",\"posts_前端_以前_typescript-类.md\":\"13365c9d\",\"posts_前端_以前_typescript-类型兼容性.md\":\"ac35b319\",\"posts_前端_以前_docker初探.md\":\"9806765f\",\"posts_前端_以前_es6-symbol.md\":\"777f11e2\",\"posts_前端_以前_es6-函数.md\":\"d13a66ed\",\"posts_前端_以前_es6-数组新增功能与改进.md\":\"4da37807\",\"posts_前端_以前_es6学习-字符串的扩展.md\":\"c0e545d8\",\"posts_前端_以前_es6学习-数组的扩展.md\":\"2af51582\",\"posts_前端_以前_git温习.md\":\"41816fb6\",\"posts_前端_以前_git秘钥生成.md\":\"be3b5c78\",\"posts_前端_以前_gulp-smushit-无损压缩jpg和png.md\":\"8cc8c003\",\"posts_前端_以前_html-三栏布局（两边固定宽度，中间自适应）.md\":\"dee91b4d\",\"posts_前端_以前_html-高度塌陷（css）几种小技巧.md\":\"421f4b54\",\"posts_前端_以前_ife-笔记1.md\":\"05c378b8\",\"posts_前端_以前_jquery源码学习（1）-总体架构.md\":\"9d328fa5\",\"posts_前端_以前_jquery源码学习（2）-构造jquery对象（1）.md\":\"ff9bcb8d\",\"posts_前端_以前_javasciptdom操作.md\":\"998a0017\",\"posts_前端_以前_javascipt函数基础.md\":\"894f2c54\",\"posts_前端_以前_javascipt变量.md\":\"bc864f04\",\"posts_前端_以前_javascipt字符串函数.md\":\"8817d611\",\"posts_前端_以前_javascipt数据类型.md\":\"8b726d45\",\"posts_前端_以前_javascipt数组.md\":\"4004b3a5\",\"posts_前端_以前_jquery回调函数复习.md\":\"d3f6bd0d\",\"posts_前端_以前_jstips-1.md\":\"44a96198\",\"posts_前端_以前_js的严格模式总结.md\":\"81a1f179\",\"posts_前端_以前_linux下安装mysql.md\":\"9d51932e\",\"posts_前端_以前_linux安装mongodb.md\":\"30d745c9\",\"posts_前端_以前_react-components-and-props.md\":\"38d10262\",\"posts_前端_以前_typescript-高级类型.md\":\"d6f255b7\",\"posts_前端_以前_typescript基础类型.md\":\"e3b41064\",\"posts_前端_以前_typescript接口的使用.md\":\"3d53bb2c\",\"posts_前端_以前_vue2.md\":\"94b281f1\",\"posts_前端_以前_vue实例.md\":\"3b34f909\",\"posts_前端_以前_webapck4升级踩记录.md\":\"6e8f991b\",\"posts_前端_以前_webpack4-loader.md\":\"d13d0786\",\"posts_前端_以前_webpack4-plugin.md\":\"04c81c34\",\"posts_前端_以前_webpack4使用.md\":\"772d8e6f\",\"posts_前端_以前_webpack4操作.md\":\"0c4144b3\",\"posts_前端_以前_webpack笔记1.md\":\"1c6f6802\",\"posts_前端_以前_你是人间的四月天.md\":\"0ec3e202\",\"posts_前端_以前_几种自适应布局.md\":\"3fc02842\",\"posts_前端_以前_实现nodejs-express-nginx-mysql线上环境配置1.md\":\"6ee9813e\",\"posts_前端_以前_小岁月太着急.md\":\"33cca300\",\"posts_前端_以前_我不喜欢这个世界，我只喜欢你.md\":\"77f91269\",\"posts_前端_以前_模板语法.md\":\"739d0a0c\",\"posts_前端_以前_正则表达式.md\":\"11b60857\",\"posts_前端_以前_用css做一个三角形.md\":\"ad951c11\",\"posts_前端_以前_用linux服务器搭建node环境（安装node）.md\":\"169c9d7b\",\"posts_前端_以前_给自己的网站设置https认证(nginx服务器).md\":\"3fd36d79\",\"posts_前端_以前_自适应适配.md\":\"dcdab70b\",\"posts_前端_以前_苹果不兼容js的date解决方式.md\":\"592b9927\",\"posts_前端_以前_解决下面点击时出现图片轮廓的问题.md\":\"bda92551\",\"posts_前端_以前_越努力，越幸运.md\":\"a405544a\",\"posts_前端_以前_趣味题.md\":\"2f95e0d1\",\"posts_前端_以前_面试问题小计.md\":\"b277683e\",\"posts_前端_工具_git常用命令.md\":\"a133b861\",\"posts_前端_工具_mongodb命令.md\":\"2312ec6f\",\"posts_前端_工具_brew安装nvm.md\":\"58376c83\",\"posts_前端_工具_buglist.md\":\"84202760\",\"posts_前端_工具_github actions使用指南.md\":\"facf0454\",\"posts_前端_node_puttputer.md\":\"cc821646\",\"posts_旅游_长沙旅游.md\":\"54ec1c71\",\"posts_日常_十二的照片.md\":\"f0607949\",\"posts_读书_读书观后感.md\":\"e65e0aad\",\"tags.md\":\"a804ad06\",\"posts_前端_以前_node-review.md\":\"6d1b34e7\",\"posts_前端_以前_react-jsx-in-depth.md\":\"93be1549\",\"posts_前端_以前_javascript流程语句以及运算符，bow操作图，以及学习路线图.md\":\"c92bff3f\",\"posts_前端_以前_小幸运.md\":\"c82d2377\",\"posts_前端_以前_心情日记.md\":\"dde5f350\",\"posts_前端_以前_react-typechecking-with-proptypes.md\":\"c646d854\",\"posts_前端_vue2_props处理.md\":\"486a1259\",\"posts_前端_工具_时序图.md\":\"cd41e43d\",\"posts_前端_以前_es6-类.md\":\"034899ee\",\"posts_前端_以前_node-js深入浅出笔记12.md\":\"9fe6f1d6\",\"posts_前端_以前_css3-布局样式相关-慕课网学习.md\":\"d8b81eac\",\"index.md\":\"a336b373\",\"posts_前端_node_koa源码1.md\":\"cb703669\",\"posts_前端_以前_echart的柱状图和饼图的demo.md\":\"baab6d7b\",\"posts_前端_以前_es6-set集合与map集合.md\":\"ab423b9b\",\"posts_前端_以前_es6-块级作用域绑定.md\":\"d5422b43\",\"posts_前端_以前_es6-迭代器和生成器.md\":\"2bdb2d5a\",\"posts_前端_以前_c语言基础.md\":\"7ea07247\",\"posts_前端_以前_es6学习-let和const命令.md\":\"df63b2f4\",\"posts_前端_vue2_rendermixin.md\":\"a23418e7\",\"posts_前端_以前_css3-渐变，动画过度，2d基础.md\":\"b371a842\",\"posts_前端_以前_node-js深入浅出笔记9.md\":\"87c92e0c\",\"posts_前端_node_koa源码2.md\":\"77fc046a\",\"posts_前端_node_koa源码3.md\":\"05cda1e5\",\"posts_前端_node_koa源码4.md\":\"eb8ba147\",\"posts_前端_node_zlib压缩模块.md\":\"111cb4c9\",\"posts_前端_node_模块定义.md\":\"1f2eb745\",\"posts_前端_vue2_eventsmixin.md\":\"9416ab60\",\"posts_前端_vue2_initglobalapi.md\":\"5e890d8f\",\"posts_前端_vue2_initmixin.md\":\"05e819c0\",\"posts_前端_vue2_lifecyclemixin.md\":\"eaab58dd\",\"posts_前端_vue2_statemixin.md\":\"564edb8e\",\"posts_前端_vue2_入口构造函数分析.md\":\"86be1f4d\",\"posts_前端_vue2_响应式原理.md\":\"d51bce72\",\"posts_前端_vue2_格式化.md\":\"f4316059\",\"posts_前端_以前_angularjs学习1.md\":\"87a3b08a\",\"posts_前端_以前_es6-字符串和正则表达式.md\":\"8aa7d43b\",\"posts_前端_以前_i-really-like-you.md\":\"3777d965\",\"posts_前端_以前_async与await体验.md\":\"e369102f\",\"posts_前端_以前_babel.md\":\"1bcc6efd\",\"posts_前端_以前_css3-3d转换和3d动画.md\":\"0d5c9390\",\"posts_前端_以前_node-js开发指南笔记1.md\":\"f64fa14b\",\"posts_前端_以前_node-js开发指南笔记3.md\":\"de5d1007\",\"posts_前端_以前_node-js开发指南笔记4.md\":\"f450db5d\",\"posts_前端_以前_node-js开发指南笔记5-express.md\":\"93a2cad3\",\"posts_前端_以前_node-js开发指南笔记6.md\":\"cc4fd669\",\"posts_前端_以前_node-js深入浅出笔记10.md\":\"a1144010\",\"posts_前端_以前_node-js深入浅出笔记11.md\":\"27596761\",\"posts_前端_以前_node-js深入浅出笔记13.md\":\"79971d7e\",\"posts_前端_以前_node-js深入浅出笔记14.md\":\"f25e58cc\",\"posts_前端_以前_node-js深入浅出笔记15.md\":\"2141134b\",\"posts_前端_以前_node-js深入浅出笔记16.md\":\"6888066d\",\"posts_前端_以前_node-js深入浅出笔记2.md\":\"2ebc653d\",\"posts_前端_以前_node-js深入浅出笔记5.md\":\"d62ebd2d\",\"posts_前端_以前_node-js深入浅出笔记6.md\":\"51ee15a7\",\"posts_前端_以前_node-js深入浅出笔记7-1.md\":\"5b9479bb\",\"posts_前端_以前_node-js深入浅出笔记8.md\":\"4bc52703\",\"posts_前端_以前_react-forms.md\":\"01e946ab\",\"posts_前端_以前_angularjs学习2.md\":\"652d003d\",\"posts_前端_以前_node-js开发指南笔记2.md\":\"6b799588\",\"posts_前端_以前_node-js深入浅出笔记17.md\":\"9d4f64d5\",\"posts_前端_以前_node-js深入浅出笔记7.md\":\"b186b0fa\",\"posts_前端_以前_node-js深入浅出笔记3.md\":\"09b62657\",\"posts_前端_以前_react-用sass编写css.md\":\"ba7ae5cb\",\"posts_前端_以前_require-js使用.md\":\"7fa7fd9f\",\"posts_前端_以前_sass基本语法.md\":\"16cff486\",\"posts_前端_以前_typescript-symbol.md\":\"ce2cf22d\",\"posts_前端_工具_node内置模块.md\":\"75d4361b\",\"posts_前端_以前_node-js深入浅出笔记4.md\":\"0a2392c4\",\"posts_前端_以前_mysql配置.md\":\"9d61ee36\",\"posts_前端_以前_mysql（php操作）.md\":\"6abce65f\",\"posts_前端_以前_node-demo.md\":\"c30d2a45\",\"posts_前端_以前_linux环境下安装nginx.md\":\"31d23553\",\"posts_前端_以前_python基础4.md\":\"9cc2c806\"}")
__VP_SITE_DATA__ = JSON.parse("{\"lang\":\"zn-ch\",\"dir\":\"ltr\",\"title\":\"爱编程\",\"description\":\"前端开发\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"aside\":true,\"posts\":[{\"frontMatter\":{\"title\":\"github actions使用指南\",\"date\":\"2023年02月19日\",\"description\":\"github actions 基础\",\"tags\":[\"工具\"]},\"regularPath\":\"/posts/前端/工具/github actions使用指南.html\"},{\"frontMatter\":{\"title\":\"十二的照片\",\"date\":\"2022年12月30日\",\"description\":\"2022年以前给十二的丑照，记录。\",\"tags\":[\"猫\"]},\"regularPath\":\"/posts/日常/十二的照片.html\"},{\"frontMatter\":{\"title\":\"zlib压缩模块\",\"date\":\"2022年10月09日\",\"description\":\"fs模块\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/zlib压缩模块.html\"},{\"frontMatter\":{\"title\":\"模块定义\",\"date\":\"2022年10月01日\",\"description\":\"模块的分类\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/模块定义.html\"},{\"frontMatter\":{\"title\":\"fs模块\",\"date\":\"2022年10月01日\",\"description\":\"fs模块\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/fs模块.html\"},{\"frontMatter\":{\"title\":\"时序图\",\"date\":\"2022年06月30日\",\"description\":\"时序图的使用方式\",\"tags\":[\"工具\"]},\"regularPath\":\"/posts/前端/工具/时序图.html\"},{\"frontMatter\":{\"title\":\"服务端预渲染数据\",\"date\":\"2022年06月30日\",\"description\":\"vite项目在服务端预渲染数据\",\"tags\":[\"前端\"]},\"regularPath\":\"/posts/前端/2023/服务端预渲染数据.html\"},{\"frontMatter\":{\"title\":\"vite页面改造成ssr渲染\",\"date\":\"2022年06月30日\",\"description\":\"vite项目改造成支持ssr项目\",\"tags\":[\"前端\"]},\"regularPath\":\"/posts/前端/2023/vite页面改造成ssr渲染.html\"},{\"frontMatter\":{\"title\":\"长沙旅游\",\"date\":\"2022年06月12日\",\"description\":\"长沙给我印象最深的就是吃的了，果然是吃货的天堂吧，不过没吃到一次正宗的湘菜也算是一个小遗憾了。\",\"tags\":[\"旅游\"]},\"regularPath\":\"/posts/旅游/长沙旅游.html\"},{\"frontMatter\":{\"title\":\"bugList\",\"date\":\"2022年02月19日\",\"description\":\"bug记录\",\"tags\":[\"bug\"]},\"regularPath\":\"/posts/前端/工具/bugList.html\"},{\"frontMatter\":{\"title\":\"Git常用命令\",\"date\":\"2022年02月19日\",\"description\":\"git常用命令 记录下来方便查询\",\"tags\":[\"工具\"]},\"regularPath\":\"/posts/前端/工具/Git常用命令.html\"},{\"frontMatter\":{\"title\":\"格式化\",\"date\":\"2022年01月30日\",\"description\":\"现有的项目代码风格都不一致,导致格式化出来的格式，都不能统一，遇到多人合作的时候，代码一旦出现冲突就很难进行比对，eslint 重在代码质量，虽然也可以格式化，但是不如 prettier 专业。因此，采用 eslint 来规范代码，prettier 来统一代码格式。\",\"tags\":[\"工具\"]},\"regularPath\":\"/posts/前端/vue2/格式化.html\"},{\"frontMatter\":{\"title\":\"响应式原理\",\"date\":\"2022年01月25日\",\"description\":\"响应式原理\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/响应式原理.html\"},{\"frontMatter\":{\"title\":\"props处理\",\"date\":\"2022年01月25日\",\"description\":\"props处理\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/props处理.html\"},{\"frontMatter\":{\"title\":\"renderMixin\",\"date\":\"2022年01月23日\",\"description\":\"renderMixin 函数\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/renderMixin.html\"},{\"frontMatter\":{\"title\":\"initGlobalAPI\",\"date\":\"2022年01月23日\",\"description\":\"initGlobalAPI 函数\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/initGlobalAPI.html\"},{\"frontMatter\":{\"title\":\"lifecycleMixin\",\"date\":\"2022年01月22日\",\"description\":\"lifecycleMixin 函数\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/lifecycleMixin.html\"},{\"frontMatter\":{\"title\":\"eventsMixin\",\"date\":\"2022年01月18日\",\"description\":\"eventsMixin 函数\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/eventsMixin.html\"},{\"frontMatter\":{\"title\":\"stateMixin\",\"date\":\"2022年01月16日\",\"description\":\"stateMixin 函数\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/stateMixin.html\"},{\"frontMatter\":{\"title\":\"initMixin\",\"date\":\"2022年01月15日\",\"description\":\"initMixin 函数\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/initMixin.html\"},{\"frontMatter\":{\"title\":\"node内置模块\",\"date\":\"2022年01月10日\",\"description\":\"Node常用API 记录下来方便查询\",\"tags\":[\"工具\"]},\"regularPath\":\"/posts/前端/工具/node内置模块.html\"},{\"frontMatter\":{\"title\":\"MongoDB命令\",\"date\":\"2022年01月10日\",\"description\":\"mongodb常用命令 记录下来方便查询\",\"tags\":[\"工具\"]},\"regularPath\":\"/posts/前端/工具/MongoDB命令.html\"},{\"frontMatter\":{\"title\":\"入口构造函数分析\",\"date\":\"2022年01月10日\",\"description\":\"构造函数\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/vue2/入口构造函数分析.html\"},{\"frontMatter\":{\"title\":\"brew安装nvm\",\"date\":\"2021年02月10日\",\"description\":\"brew使用方法\",\"tags\":[\"工具\"]},\"regularPath\":\"/posts/前端/工具/brew安装nvm.html\"},{\"frontMatter\":{\"title\":\"puttputer\",\"date\":\"2020年09月02日\",\"description\":\"puppeteet\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/puttputer.html\"},{\"frontMatter\":{\"title\":\"koa源码4\",\"date\":\"2020年06月02日\",\"description\":\"koa源码\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/koa源码4.html\"},{\"frontMatter\":{\"title\":\"koa源码3\",\"date\":\"2020年05月25日\",\"description\":\"koa源码\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/koa源码3.html\"},{\"frontMatter\":{\"title\":\"koa源码2\",\"date\":\"2020年05月05日\",\"description\":\"koa源码\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/koa源码2.html\"},{\"frontMatter\":{\"title\":\"koa源码1\",\"date\":\"2020年05月02日\",\"description\":\"koa源码\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/node/koa源码1.html\"},{\"frontMatter\":{\"title\":\"读书观后感\",\"date\":\"2020年01月30日\",\"description\":\"读的一些书的读后感\",\"tags\":[\"读书\"]},\"regularPath\":\"/posts/读书/读书观后感.html\"},{\"frontMatter\":{\"title\":\"python基础5\",\"date\":\"2019年02月17日\",\"description\":\"python基础\",\"tags\":[\"python\"]},\"regularPath\":\"/posts/前端/以前/python基础5.html\"},{\"frontMatter\":{\"title\":\"python基础4\",\"date\":\"2019年02月10日\",\"description\":\"python基础\",\"tags\":[\"python\"]},\"regularPath\":\"/posts/前端/以前/python基础4.html\"},{\"frontMatter\":{\"title\":\"python基础3\",\"date\":\"2019年02月09日\",\"description\":\"python基础\",\"tags\":[\"python\"]},\"regularPath\":\"/posts/前端/以前/python基础3.html\"},{\"frontMatter\":{\"title\":\"python基础2\",\"date\":\"2019年02月07日\",\"description\":\"python基础\",\"tags\":[\"python\"]},\"regularPath\":\"/posts/前端/以前/python基础2.html\"},{\"frontMatter\":{\"title\":\"python基础1\",\"date\":\"2019年02月06日\",\"description\":\"python基础\",\"tags\":[\"python\"]},\"regularPath\":\"/posts/前端/以前/python基础1.html\"},{\"frontMatter\":{\"title\":\"python基础\",\"date\":\"2019年02月02日\",\"description\":\"python基础\",\"tags\":[\"python\"]},\"regularPath\":\"/posts/前端/以前/python基础.html\"},{\"frontMatter\":{\"title\":\"c语言基础\",\"tags\":[\"c\"],\"date\":\"2018年08月29日\"},\"regularPath\":\"/posts/前端/以前/c语言基础.html\"},{\"frontMatter\":{\"title\":\"git秘钥生成\",\"tags\":[\"git\"],\"date\":\"2018年08月09日\"},\"regularPath\":\"/posts/前端/以前/git秘钥生成.html\"},{\"frontMatter\":{\"title\":\"docker初探\",\"tags\":[\"node\"],\"date\":\"2018年07月21日\"},\"regularPath\":\"/posts/前端/以前/docker初探.html\"},{\"frontMatter\":{\"title\":\"实现nodejs-express-nginx-mysql线上环境配置1\",\"tags\":[\"node\"],\"date\":\"2018年07月16日\"},\"regularPath\":\"/posts/前端/以前/实现nodejs-express-nginx-mysql线上环境配置1.html\"},{\"frontMatter\":{\"title\":\"mysql配置\",\"tags\":[\"node\"],\"date\":\"2018年07月16日\"},\"regularPath\":\"/posts/前端/以前/mysql配置.html\"},{\"frontMatter\":{\"title\":\"webapck4升级踩记录\",\"tags\":[\"webapck\"],\"date\":\"2018年07月11日\"},\"regularPath\":\"/posts/前端/以前/webapck4升级踩记录.html\"},{\"frontMatter\":{\"title\":\"node技术分享\",\"tags\":[\"node\"],\"date\":\"2018年07月10日\"},\"regularPath\":\"/posts/前端/以前/node技术分享.html\"},{\"frontMatter\":{\"title\":\"linux安装MongoDB\",\"tags\":[\"node\"],\"date\":\"2018年07月01日\"},\"regularPath\":\"/posts/前端/以前/linux安装MongoDB.html\"},{\"frontMatter\":{\"title\":\"趣味题\",\"tags\":[\"js\"],\"date\":\"2018年06月15日\"},\"regularPath\":\"/posts/前端/以前/趣味题.html\"},{\"frontMatter\":{\"title\":\"typescript-模块\",\"tags\":[\"typescript\"],\"date\":\"2018年06月15日\"},\"regularPath\":\"/posts/前端/以前/typescript-模块.html\"},{\"frontMatter\":{\"title\":\"typescript-高级类型\",\"tags\":[\"typescript\"],\"date\":\"2018年06月14日\"},\"regularPath\":\"/posts/前端/以前/typescript-高级类型.html\"},{\"frontMatter\":{\"title\":\"typescript-Symbol\",\"tags\":[\"typescript\"],\"date\":\"2018年06月14日\"},\"regularPath\":\"/posts/前端/以前/typescript-Symbol.html\"},{\"frontMatter\":{\"title\":\"typescript-类型推断\",\"tags\":[\"typescript\"],\"date\":\"2018年06月13日\"},\"regularPath\":\"/posts/前端/以前/typescript-类型推断.html\"},{\"frontMatter\":{\"title\":\"typescript-类型兼容性\",\"categories\":[\"技术\"],\"tags\":\"typescript\",\"date\":\"2018年06月13日\"},\"regularPath\":\"/posts/前端/以前/typescript-类型兼容性.html\"},{\"frontMatter\":{\"title\":\"typescript-泛型\",\"tags\":[\"typescript\"],\"date\":\"2018年06月13日\"},\"regularPath\":\"/posts/前端/以前/typescript-泛型.html\"},{\"frontMatter\":{\"title\":\"typescript接口的使用\",\"tags\":[\"typescript\"],\"date\":\"2018年06月12日\"},\"regularPath\":\"/posts/前端/以前/typescript接口的使用.html\"},{\"frontMatter\":{\"title\":\"typescript-类\",\"tags\":[\"typescript\"],\"date\":\"2018年06月12日\"},\"regularPath\":\"/posts/前端/以前/typescript-类.html\"},{\"frontMatter\":{\"title\":\"typescript-function\",\"categories\":[\"技术\"],\"tags\":[\"typescript\"],\"date\":\"2018年06月12日\"},\"regularPath\":\"/posts/前端/以前/typescript-function.html\"},{\"frontMatter\":{\"title\":\"typescript基础类型\",\"tags\":[\"typescript\"],\"date\":\"2018年06月11日\"},\"regularPath\":\"/posts/前端/以前/typescript基础类型.html\"},{\"frontMatter\":{\"title\":\"webpack4操作\",\"date\":\"2018年06月06日\",\"categories\":\"技术\",\"tags\":[\"webapck\"]},\"regularPath\":\"/posts/前端/以前/webpack4操作.html\"},{\"frontMatter\":{\"title\":\"webpack4使用\",\"date\":\"2018年06月05日\",\"categories\":\"技术\",\"tags\":[\"webapck\"]},\"regularPath\":\"/posts/前端/以前/webpack4使用.html\"},{\"frontMatter\":{\"title\":\"webpack4-plugin\",\"date\":\"2018年06月05日\",\"categories\":\"技术\",\"tags\":[\"webapck\"]},\"regularPath\":\"/posts/前端/以前/webpack4-plugin.html\"},{\"frontMatter\":{\"title\":\"webpack4-loader\",\"date\":\"2018年06月05日\",\"categories\":\"技术\",\"tags\":[\"webapck\"]},\"regularPath\":\"/posts/前端/以前/webpack4-loader.html\"},{\"frontMatter\":{\"title\":\"正则表达式\",\"date\":\"2018年06月04日\",\"categories\":\"技术\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/正则表达式.html\"},{\"frontMatter\":{\"title\":\"sass基本语法\",\"date\":\"2018年05月08日\",\"tags\":[\"css\"]},\"regularPath\":\"/posts/前端/以前/sass基本语法.html\"},{\"frontMatter\":{\"title\":\"ife-笔记1\",\"date\":\"2018年04月26日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/ife-笔记1.html\"},{\"frontMatter\":{\"title\":\"越努力，越幸运\",\"date\":\"2018年04月24日\",\"tags\":[\"日常\"]},\"regularPath\":\"/posts/前端/以前/越努力，越幸运.html\"},{\"frontMatter\":{\"title\":\"es6-函数\",\"date\":\"2018年04月06日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6-函数.html\"},{\"frontMatter\":{\"title\":\"es6-Symbol\",\"date\":\"2018年04月04日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6-Symbol.html\"},{\"frontMatter\":{\"title\":\"es6-Set集合与Map集合\",\"date\":\"2018年03月24日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6-Set集合与Map集合.html\"},{\"frontMatter\":{\"title\":\"es6-迭代器和生成器\",\"date\":\"2018年03月20日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6-迭代器和生成器.html\"},{\"frontMatter\":{\"title\":\"es6-类\",\"date\":\"2018年03月17日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6-类.html\"},{\"frontMatter\":{\"title\":\"es6-数组新增功能与改进\",\"date\":\"2018年03月15日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6-数组新增功能与改进.html\"},{\"frontMatter\":{\"title\":\"ES6-字符串和正则表达式\",\"date\":\"2018年01月25日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/ES6-字符串和正则表达式.html\"},{\"frontMatter\":{\"title\":\"es6-块级作用域绑定\",\"date\":\"2018年01月24日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6-块级作用域绑定.html\"},{\"frontMatter\":{\"title\":\"给自己的网站设置https认证(nginx服务器)\",\"date\":\"2018年01月17日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/给自己的网站设置https认证(nginx服务器).html\"},{\"frontMatter\":{\"title\":\"linux下安装mysql\",\"date\":\"2018年01月16日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/linux下安装mysql.html\"},{\"frontMatter\":{\"title\":\"linux环境下安装nginx\",\"date\":\"2018年01月15日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/linux环境下安装nginx.html\"},{\"frontMatter\":{\"title\":\"用linux服务器搭建node环境（安装node）\",\"date\":\"2018年01月13日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/用linux服务器搭建node环境（安装node）.html\"},{\"frontMatter\":{\"title\":\"webpack笔记1\",\"date\":\"2018年01月10日\",\"tags\":[\"webapck\"]},\"regularPath\":\"/posts/前端/以前/webpack笔记1.html\"},{\"frontMatter\":{\"title\":\"苹果不兼容js的Date解决方式\",\"date\":\"2017年11月06日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/苹果不兼容js的Date解决方式.html\"},{\"frontMatter\":{\"title\":\"node-Demo\",\"date\":\"2017年10月17日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-Demo.html\"},{\"frontMatter\":{\"title\":\"echart的柱状图和饼图的demo\",\"date\":\"2017年10月13日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/echart的柱状图和饼图的demo.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记17\",\"date\":\"2017年09月29日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记17.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记16\",\"date\":\"2017年09月26日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记16.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记15\",\"date\":\"2017年09月22日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记15.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记14\",\"date\":\"2017年09月13日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记14.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记13\",\"date\":\"2017年09月12日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记13.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记12\",\"date\":\"2017年09月11日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记12.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记11\",\"date\":\"2017年09月08日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记11.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记10\",\"date\":\"2017年09月07日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记10.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记9\",\"date\":\"2017年09月06日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记9.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记8\",\"date\":\"2017年09月05日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记8.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记7-1\",\"date\":\"2017年09月04日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记7-1.html\"},{\"frontMatter\":{\"title\":\"I-Really-Like-You\",\"date\":\"2017年09月04日\",\"tags\":[\"日常\"]},\"regularPath\":\"/posts/前端/以前/I-Really-Like-You.html\"},{\"frontMatter\":{\"title\":\"小岁月太着急\",\"date\":\"2017年09月01日\",\"tags\":[\"日常\"]},\"regularPath\":\"/posts/前端/以前/小岁月太着急.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记6\",\"date\":\"2017年08月31日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记6.html\"},{\"frontMatter\":{\"title\":\"我不喜欢这个世界，我只喜欢你\",\"date\":\"2017年08月30日\",\"tags\":[\"日常\"]},\"regularPath\":\"/posts/前端/以前/我不喜欢这个世界，我只喜欢你.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记5\",\"date\":\"2017年08月30日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记5.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记4\",\"date\":\"2017年08月29日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记4.html\"},{\"frontMatter\":{\"title\":\"你是人间的四月天\",\"date\":\"2017年08月28日\",\"tags\":[\"日常\"]},\"regularPath\":\"/posts/前端/以前/你是人间的四月天.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记3\",\"date\":\"2017年08月27日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记3.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记2\",\"date\":\"2017年08月26日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记2.html\"},{\"frontMatter\":{\"title\":\"node-js深入浅出笔记7\",\"date\":\"2017年08月25日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js深入浅出笔记7.html\"},{\"frontMatter\":{\"title\":\"心情日记\",\"date\":\"2017年08月24日\",\"tags\":[\"日常\"]},\"regularPath\":\"/posts/前端/以前/心情日记.html\"},{\"frontMatter\":{\"title\":\"小幸运\",\"date\":\"2017年08月24日\",\"tags\":[\"音乐\"]},\"regularPath\":\"/posts/前端/以前/小幸运.html\"},{\"frontMatter\":{\"title\":\"babel\",\"date\":\"2017年08月23日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/babel.html\"},{\"frontMatter\":{\"title\":\"node-js开发指南笔记6\",\"date\":\"2017年08月16日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js开发指南笔记6.html\"},{\"frontMatter\":{\"title\":\"node-js开发指南笔记5-express\",\"date\":\"2017年08月15日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js开发指南笔记5-express.html\"},{\"frontMatter\":{\"title\":\"jsTips-1\",\"date\":\"2017年08月15日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/jsTips-1.html\"},{\"frontMatter\":{\"title\":\"node-js开发指南笔记4\",\"date\":\"2017年08月14日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js开发指南笔记4.html\"},{\"frontMatter\":{\"title\":\"node-js开发指南笔记3\",\"date\":\"2017年08月13日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js开发指南笔记3.html\"},{\"frontMatter\":{\"title\":\"node-js开发指南笔记2\",\"date\":\"2017年08月11日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js开发指南笔记2.html\"},{\"frontMatter\":{\"layout\":\"‘\",\"title\":\"node-常用的包\",\"date\":\"2017年08月09日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-常用的包.html\"},{\"frontMatter\":{\"title\":\"node-js开发指南笔记1\",\"date\":\"2017年08月09日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-js开发指南笔记1.html\"},{\"frontMatter\":{\"title\":\"几种自适应布局\",\"date\":\"2017年08月05日\",\"categories\":\"技术\",\"tags\":[\"css\"]},\"regularPath\":\"/posts/前端/以前/几种自适应布局.html\"},{\"frontMatter\":{\"title\":\"解决下面点击时出现图片轮廓的问题\",\"date\":\"2017年08月02日\",\"tags\":[\"css\"]},\"regularPath\":\"/posts/前端/以前/解决下面点击时出现图片轮廓的问题.html\"},{\"frontMatter\":{\"title\":\"node-review\",\"date\":\"2017年08月01日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/node-review.html\"},{\"frontMatter\":{\"title\":\"jQuery源码学习（2）-构造jquery对象（1）\",\"date\":\"2017年07月29日\",\"tags\":[\"jQuery\"]},\"regularPath\":\"/posts/前端/以前/jQuery源码学习（2）-构造jquery对象（1）.html\"},{\"frontMatter\":{\"title\":\"jQuery源码学习（1）-总体架构\",\"date\":\"2017年07月28日\",\"tags\":[\"jQuery\"]},\"regularPath\":\"/posts/前端/以前/jQuery源码学习（1）-总体架构.html\"},{\"frontMatter\":{\"title\":\"自适应适配\",\"date\":\"2017年07月21日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/自适应适配.html\"},{\"frontMatter\":{\"title\":\"react-用sass编写css\",\"date\":\"2017年07月19日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-用sass编写css.html\"},{\"frontMatter\":{\"title\":\"react-生命周期\",\"date\":\"2017年07月19日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-生命周期.html\"},{\"frontMatter\":{\"title\":\"react-es5vses6\",\"date\":\"2017年07月19日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-es5vses6.html\"},{\"frontMatter\":{\"title\":\"react-Optimizing-Performance\",\"date\":\"2017年07月18日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Optimizing-Performance.html\"},{\"frontMatter\":{\"title\":\"react-Uncontrolled-Components\",\"date\":\"2017年07月17日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Uncontrolled-Components.html\"},{\"frontMatter\":{\"title\":\"react-Lifting-State-Up\",\"date\":\"2017年07月16日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Lifting-State-Up.html\"},{\"frontMatter\":{\"title\":\"react-Typechecking-With-PropTypes\",\"date\":\"2017年07月14日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Typechecking-With-PropTypes.html\"},{\"frontMatter\":{\"title\":\"react-Refs-and-the-DOM\",\"date\":\"2017年07月14日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Refs-and-the-DOM.html\"},{\"frontMatter\":{\"title\":\"react-JSX-In-Depth\",\"date\":\"2017年07月13日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-JSX-In-Depth.html\"},{\"frontMatter\":{\"title\":\"react-Composition-vs-Inheritance\",\"date\":\"2017年07月13日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Composition-vs-Inheritance.html\"},{\"frontMatter\":{\"title\":\"react-Forms\",\"date\":\"2017年07月11日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Forms.html\"},{\"frontMatter\":{\"title\":\"react-Lists-and-Keys\",\"date\":\"2017年07月10日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Lists-and-Keys.html\"},{\"frontMatter\":{\"title\":\"react-react-Conditional-Rendering\",\"date\":\"2017年07月09日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-react-Conditional-Rendering.html\"},{\"frontMatter\":{\"title\":\"react-Handling-Events\",\"date\":\"2017年07月06日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Handling-Events.html\"},{\"frontMatter\":{\"title\":\"react-State-and-Lifecycle\",\"date\":\"2017年07月04日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-State-and-Lifecycle.html\"},{\"frontMatter\":{\"title\":\"react-Components-and-Props\",\"date\":\"2017年07月03日\",\"tags\":[\"react\"]},\"regularPath\":\"/posts/前端/以前/react-Components-and-Props.html\"},{\"frontMatter\":{\"title\":\"面试问题小计\",\"date\":\"2017年06月20日\",\"tags\":[\"面试\"]},\"regularPath\":\"/posts/前端/以前/面试问题小计.html\"},{\"frontMatter\":{\"title\":\"promise的用法深入3\",\"date\":\"2017年02月11日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/promise的用法深入3.html\"},{\"frontMatter\":{\"title\":\"async与await体验\",\"date\":\"2017年02月11日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/async与await体验.html\"},{\"frontMatter\":{\"title\":\"promise的用法深入2\",\"date\":\"2017年02月08日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/promise的用法深入2.html\"},{\"frontMatter\":{\"title\":\"promise的用法深入1\",\"date\":\"2017年02月04日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/promise的用法深入1.html\"},{\"frontMatter\":{\"title\":\"es6学习-数组的扩展\",\"date\":\"2016年11月10日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6学习-数组的扩展.html\"},{\"frontMatter\":{\"title\":\"es6学习-字符串的扩展\",\"date\":\"2016年11月10日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6学习-字符串的扩展.html\"},{\"frontMatter\":{\"title\":\"模板语法\",\"date\":\"2016年11月08日\",\"tags\":[\"vue\"]},\"regularPath\":\"/posts/前端/以前/模板语法.html\"},{\"frontMatter\":{\"title\":\"vue2\",\"date\":\"2016年11月08日\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/以前/vue2.html\"},{\"frontMatter\":{\"title\":\"vue实例\",\"date\":\"2016年11月03日\",\"tags\":[\"vue2\"]},\"regularPath\":\"/posts/前端/以前/vue实例.html\"},{\"frontMatter\":{\"title\":\"es6学习-let和const命令\",\"date\":\"2016年10月28日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/es6学习-let和const命令.html\"},{\"frontMatter\":{\"title\":\"AngularJS学习2\",\"date\":\"2016年10月23日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/AngularJS学习2.html\"},{\"frontMatter\":{\"title\":\"AngularJS学习1\",\"date\":\"2016年10月20日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/AngularJS学习1.html\"},{\"frontMatter\":{\"title\":\"git温习\",\"date\":\"2016年10月08日\",\"tags\":[\"git\"]},\"regularPath\":\"/posts/前端/以前/git温习.html\"},{\"frontMatter\":{\"title\":\"mysql（php操作）\",\"date\":\"2016年10月05日\",\"tags\":[\"node\"]},\"regularPath\":\"/posts/前端/以前/mysql（php操作）.html\"},{\"frontMatter\":{\"title\":\"require-js使用\",\"date\":\"2016年09月15日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/require-js使用.html\"},{\"frontMatter\":{\"title\":\"pubsub-js的简单使用\",\"date\":\"2016年08月20日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/pubsub-js的简单使用.html\"},{\"frontMatter\":{\"title\":\"gulp-smushit-无损压缩jpg和png\",\"date\":\"2016年08月15日\",\"tags\":[\"gulp\"]},\"regularPath\":\"/posts/前端/以前/gulp-smushit-无损压缩jpg和png.html\"},{\"frontMatter\":{\"title\":\"jquery回调函数复习\",\"date\":\"2016年08月11日\",\"tags\":[\"jQuery\"]},\"regularPath\":\"/posts/前端/以前/jquery回调函数复习.html\"},{\"frontMatter\":{\"title\":\"javascript流程语句以及运算符，BOW操作图，以及学习路线图\",\"date\":\"2016年08月03日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/javascript流程语句以及运算符，BOW操作图，以及学习路线图.html\"},{\"frontMatter\":{\"title\":\"javascipt字符串函数\",\"date\":\"2016年08月03日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/javascipt字符串函数.html\"},{\"frontMatter\":{\"title\":\"javasciptDom操作\",\"date\":\"2016年08月03日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/javasciptDom操作.html\"},{\"frontMatter\":{\"title\":\"js的严格模式总结\",\"date\":\"2016年07月29日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/js的严格模式总结.html\"},{\"frontMatter\":{\"title\":\"javascipt数组\",\"date\":\"2016年07月28日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/javascipt数组.html\"},{\"frontMatter\":{\"title\":\"javascipt函数基础\",\"date\":\"2016年07月25日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/javascipt函数基础.html\"},{\"frontMatter\":{\"title\":\"javascipt变量\",\"date\":\"2016年07月22日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/javascipt变量.html\"},{\"frontMatter\":{\"title\":\"javascipt数据类型\",\"date\":\"2016年07月21日\",\"tags\":[\"js\"]},\"regularPath\":\"/posts/前端/以前/javascipt数据类型.html\"},{\"frontMatter\":{\"title\":\"css3-布局样式相关-慕课网学习\",\"date\":\"2016年07月21日\",\"tags\":[\"css\"]},\"regularPath\":\"/posts/前端/以前/css3-布局样式相关-慕课网学习.html\"},{\"frontMatter\":{\"title\":\"css3-3d转换和3D动画\",\"date\":\"2016年07月18日\",\"tags\":[\"css\"]},\"regularPath\":\"/posts/前端/以前/css3-3d转换和3D动画.html\"},{\"frontMatter\":{\"title\":\"css3-渐变，动画过度，2d基础\",\"date\":\"2016年07月14日\",\"tags\":[\"css\"]},\"regularPath\":\"/posts/前端/以前/css3-渐变，动画过度，2d基础.html\"},{\"frontMatter\":{\"title\":\"用CSS做一个三角形\",\"date\":\"2016年07月11日\",\"tags\":[\"css\"]},\"regularPath\":\"/posts/前端/以前/用CSS做一个三角形.html\"},{\"frontMatter\":{\"title\":\"html-高度塌陷（css）几种小技巧\",\"date\":\"2016年07月08日\",\"tags\":[\"html\"]},\"regularPath\":\"/posts/前端/以前/html-高度塌陷（css）几种小技巧.html\"},{\"frontMatter\":{\"title\":\"html-三栏布局（两边固定宽度，中间自适应）\",\"date\":\"2016年07月05日\",\"tags\":[\"html\"]},\"regularPath\":\"/posts/前端/以前/html-三栏布局（两边固定宽度，中间自适应）.html\"}],\"pageSize\":15,\"logo\":\"/cat.svg\",\"postLength\":166,\"nav\":[{\"text\":\"🏡首页\",\"link\":\"/\"},{\"text\":\"🔖标签\",\"link\":\"/tags\"},{\"text\":\"📃归档\",\"link\":\"/archives\"},{\"text\":\"🤩关于\",\"link\":\"/about\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/aymfx\"},{\"icon\":{\"svg\":\"<svg role=\\\"img\\\" viewBox=\\\"0 0 1024 1024\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\">\\n            <path d=\\\"M874.666667 375.189333V746.666667a64 64 0 0 1-64 64H213.333333a64 64 0 0 1-64-64V375.189333l266.090667 225.6a149.333333 149.333333 0 0 0 193.152 0L874.666667 375.189333zM810.666667 213.333333a64.789333 64.789333 0 0 1 22.826666 4.181334 63.616 63.616 0 0 1 26.794667 19.413333 64.32 64.32 0 0 1 9.344 15.466667c2.773333 6.570667 4.48 13.696 4.906667 21.184L874.666667 277.333333v21.333334L553.536 572.586667a64 64 0 0 1-79.893333 2.538666l-3.178667-2.56L149.333333 298.666667v-21.333334a63.786667 63.786667 0 0 1 35.136-57.130666A63.872 63.872 0 0 1 213.333333 213.333333h597.333334z\\\" ></path>\\n            </svg>\"},\"link\":\"mailto:aymfx520@gmail.com\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}")</script>
    
  </body>
</html>